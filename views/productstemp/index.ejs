
<% layout('layouts/boilerpalte') -%> 
<!-- to insert this page in main part of boilerpaltewhere body tag inserted  -->
<%- include('../partials/flash') %>   


<section id="heading" class=" shadow-lg"> 
  <h4 class="display-4" style="font-weight: bold; font-family: Orbitron, sans-serif;
  "><i class="fa-brands fa-opencart" style="margin-right: 20px; "></i>Shopping Cart</h4>
</section> 

 <section class="d-flex  ">
  <!-- 1 corousel -->
<div style="height:300px; width: 365px;  margin-right: 10px;" class="border-radius: 15px;">
  <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel" >
    <div class="carousel-indicators" hidden >
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner " style="height:300px; width: 365px; ">
      <div class="carousel-item active " >
        <img src="https://cdn.pixabay.com/photo/2016/11/10/16/03/android-1814556_1280.jpg" class="d-block w-100 h-100 " alt="https://media.istockphoto.com/id/1435268793/photo/loading-wood-cube-in-progress-bar-3d-rendering.webp?b=1&s=170667a&w=0&k=20&c=LfjuayOz7JrB_RmgTWu6BbU8g0vNoXKq2l-UdOM_w3U=">
        <div class="carousel-caption d-none d-md-block">
    
          
        </div>
      </div>
      <div class="carousel-item">
        <img src="https://cdn.pixabay.com/photo/2014/08/05/10/27/iphone-410311_1280.jpg" class="d-block w-100" alt="...">
        <div class="carousel-caption d-none d-md-block">
      
          
        </div>
      </div>
      <div class="carousel-item">
        <img src="https://cdn.pixabay.com/photo/2017/10/12/22/17/business-2846221_1280.jpg" class="d-block w-100" alt="...">
        <div class="carousel-caption d-none d-md-block">
    
        </div>
      </div>
    </div>
   
  </div>
</div>
 
<!-- 2.corousel -->
<div style="height:300px; width: 365px; margin-bottom: 10px; margin-right: 10px;" class="border-radius: 15px;">
  <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel" >
    <div class="carousel-indicators" hidden >
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner " style="height:300px; width: 365px; ">
      <div class="carousel-item active " >
        <img src="https://cdn.pixabay.com/photo/2019/12/27/01/47/samsung-4721544_1280.jpg" class="d-block w-100 h-50 " alt="...">
        <div class="carousel-caption d-none d-md-block">
    
          
        </div>
      </div>
      <div class="carousel-item">
        <img src="https://cdn.pixabay.com/photo/2019/12/27/01/47/samsung-4721544_1280.jpg" class="d-block w-100" alt="...">
        <div class="carousel-caption d-none d-md-block">
      
          
        </div>
      </div>
      <div class="carousel-item">
        <img src="https://cdn.pixabay.com/photo/2019/12/27/01/48/samsung-4721546_1280.jpg" class="d-block w-100" alt="...">
        <div class="carousel-caption d-none d-md-block">
    
        </div>
      </div>
    </div>
   
  </div>

</div>



<div style="height:300px; width: 365px; margin-bottom: 10px;">
  <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel" >
    <div class="carousel-indicators" hidden >
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
      <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
    </div>
    <div class="carousel-inner " style="height:300px; width: 365px;">
      <div class="carousel-item active" >
        <img src="https://cdn.pixabay.com/photo/2018/06/07/19/36/phone-3460802_1280.jpg" class="d-block w-100 h-50" alt="...">
        <div class="carousel-caption d-none d-md-block">
    
          
        </div>
      </div>
      <div class="carousel-item">
        <img src="https://cdn.pixabay.com/photo/2015/06/04/21/13/samsung-797870_1280.jpg" class="d-block w-100" alt="...">
        <div class="carousel-caption d-none d-md-block">
      
          
        </div>
      </div>
      <div class="carousel-item">
        <img src="https://cdn.pixabay.com/photo/2016/03/01/20/28/phone-1231122_1280.jpg" class="d-block w-100" alt="...">
        <div class="carousel-caption d-none d-md-block">
    
        </div>
      </div>
    </div>
   
  </div>

</div>
 </section>
<div class="row products">
    <%for(let product of products){%>
        <div class="col-lg-3 col-md-6 mb-3">
            <div class="card shadow-lg mx-auto position-relative " style="width: 17rem; border-radius: 15px;">
                <img src="<%=product.img%>" class="card-img-top " alt="item image">
                <span class=" shadow-lg badge rounded-end-5  text-dark w-25 position-absolute   translate-middle-y" style="top:43%;left:0%; min-height: 5%;  background-color: rgb(248, 1, 1);"><%=product.avgRating%>  &star; | <%=product.reviews.length%></span>
                <div class="card-body">
                  <h5 class="card-title d-flex justify-content-between align-items-center">
                    <span><%= product.name.slice(0, 20) %></span> 
                    <span class="btn like-btn" product-id="<%=product._id%>">
                      <% if(currentUser && currentUser.wishList.includes(product._id)){ %>
                         <i class="fas fa-heart"></i>
                        <% } else{ %>
                          <i class="far fa-heart"></i>
                      <% } %>
                    </span>
                  </h5>
                  <p class="card-text fw-light " style="font-size: medium;"><%= product.dec.slice(0, 80)%>..</p>
                  <% if(product.reviews.length){ %>
                    <p class="text-muted"><%=product.reviews.length%> reviews</p>
                  <%}else{%>
                    <p class="text-muted" style="font-size:medium;">No reviews</p>
                  <% } %> 
                  <h6 class="card-title"><span class="fw-lighter fs-6 text-decoration-line-through">$ <%= product.price*2 %></span> $ <%= product.price %> <span class="fw-dark fs-6 " style="color: rgb(48, 240, 48);">( 50 % OFF )</span> </h6>
                  <a href="/products/<%=product._id%>" class="btn btn-sm show-btn">View Now</a>
                 
                  <!-- hide from buyer -->
                 <% if(currentUser && currentUser.role === 'seller'){ %>  
            <!-- //use form for method overide and post request delete -->
            <form class="d-inline-block"  action="/products/<%=product.id%>?_method=DELETE" method="POST">
             <button class=" btn btn-danger  btn-sm mt-1">DELETE</button>
             </form>
           <% }%>

                </div>
            </div>
        </div>
    <%}%>
</div>

<script src="/js/commlikebtn.js"></script>
<!-- for like unlike event handel -->